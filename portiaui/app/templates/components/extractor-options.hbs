{{#tree-list class="extractor-options" as |list|}}
    {{#list.item hasChildren=true as |title-item|}}
        {{#if (eq title-item.section "item")}}
            {{#title-item.text class="title"}}
                Extractors
            {{/title-item.text}}
            {{#title-item.icon-menu icon='add-dropdown' as |dropdown|}}
                {{#dropdown.header}}Add field type extractor{{/dropdown.header}}
                {{#each types as |type|}}
                    {{#dropdown.item action=(chain-actions (action 'addTypeExtractor' type) dropdown.closeMenu) as |value|}}
                        {{title-item.icon class="icon" icon=type}}{{type}}
                    {{/dropdown.item}}
                {{/each}}
                {{#dropdown.header}}Add regular expression extractor{{/dropdown.header}}
                {{#each regexExtractors as |extractor|}}
                    {{#dropdown.item action=(chain-actions (action 'addRegexExtractor' extractor) dropdown.closeMenu) as |value|}}
                        {{title-item.icon class="icon" icon="regular expression"}}{{extractor.value}}
                    {{/dropdown.item}}
                {{/each}}
                {{#dropdown.item action=(chain-actions (action 'addNewRegexExtractor') dropdown.closeMenu) as |value|}}
                    {{title-item.icon class="icon" icon="add"}}New regular expression
                {{/dropdown.item}}
            {{/title-item.icon-menu}}
        {{else if (eq title-item.section "subtrees")}}
            {{#each annotation.extractors as |extractor|}}
                {{#title-item.subtree.item model=extractor as |extractor-item|}}
                    {{#if (eq extractor.type 'type')}}
                        {{extractor-item.icon icon=extractor.value}}
                        {{#extractor-item.text}}
                            {{extractor.value}}
                        {{/extractor-item.text}}
                    {{else if (eq extractor.type 'regex')}}
                        {{extractor-item.icon icon='regular expression'}}
                        {{extractor-item.editable value=(mut extractor.value) editing=(mut extractor.new) onChange=(action 'saveExtractor' extractor)}}
                    {{/if}}
                    {{extractor-item.icon icon='remove' action=(action 'removeExtractor' extractor) bubbles=false}}
                {{/title-item.subtree.item}}
            {{/each}}
        {{/if}}
    {{/list.item}}
{{/tree-list}}
