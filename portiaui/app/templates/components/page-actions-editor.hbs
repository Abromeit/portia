{{#if editing }}
{{#if addingNew}}
    <div class="form-group form-group-sm">
        <label for="actionType" class="col-sm-4 control-label">Action type</label>
        <div class="col-sm-7">
            <select onchange={{action (mut editing.type) value="target.value"}}>
                {{#each actionTypes as |type|}}
                    <option value={{type}} selected={{eq type editing.type}}>{{type}}</option>
                {{/each}}
            </select>
        </div>
        <div class="btn-center">
            <button {{action "addContinue"}} class="btn btn-primary fa fa-icon fa-plus">
                Continue
            </button>
        </div>
    </div>
{{else}}
<form class="form-horizontal">
    {{#if (eq editing.type "wait")}}
        <div class="form-group form-group-sm">
            <label for="actionType" class="col-sm-4 control-label">Timeout (ms)</label>
            <div class="col-sm-7">
                {{input value=editing.timeout pattern="^[0-9]+$" class="form-control" }}
            </div>
        </div>
    {{else}}
        <div class="form-group form-group-sm">
            <label for="actionType" class="col-sm-4 control-label">Selector</label>
            <div class="col-sm-7">
                {{input value=editing.selector class="form-control" }}
            </div>
        </div>
    {{/if}}
    {{#if (eq editing.type "set")}}
        <div class="form-group form-group-sm">
            <label for="actionType" class="col-sm-4 control-label">Value</label>
            <div class="col-sm-7">
                {{input value=editing.value class="form-control" }}
            </div>
        </div>
    {{/if}}
</form>
    <div class="form-group form-group-sm">
        <label for="actionType" class="control-label">Run only in pages matching</label>
        {{input value=editing.accept class="form-control" }}
    </div>
    <div class="form-group form-group-sm">
        <label for="actionType" class="control-label">Don't run in pages matching</label>
        {{input value=editing.reject class="form-control" }}
    </div>
    <div class="btn-center">
        <button {{action "back"}} class="btn btn-primary fa fa-icon fa-check">
            Back
        </button>
    </div>
{{/if}}
{{else}}
    {{#tree-list as |list|}}
        {{#list.item hasChildren=true childsReorderable=true reorder=(action "reorderPageAction") as |title-item|}}
            {{#if (eq title-item.section "item")}}
                {{#title-item.text}} OnLoad {{/title-item.text}}
                {{title-item.icon icon='add' action=(action "addNew") }}
            {{else if (eq title-item.section "subtrees")}}
                {{#title-item.subtree.item hide=pageActions.length as |none-item|}}
                    {{#none-item.text class="text-center"}}
                        No actions have been recorded yet
                    {{/none-item.text}}
                {{/title-item.subtree.item}}
                {{#each pageActions as |action index|}}
                    {{#title-item.subtree.item classNames="page-action" as |action-item|}}
                        {{reorder-handler}}
                        {{action-item.icon icon=action.type}}
                        {{#action-item.text}}
                            {{#if action.selector}}<code>{{action.selector}}</code>{{/if}}
                            {{#if action.value}} to <code>"{{action.value}}"</code>{{/if}}
                            {{#if action.timeout}} for {{action.timeout}}ms{{/if}}
                        {{/action-item.text}}
                        {{action-item.icon icon='options' action=(action "editPageAction" action)}}
                        {{action-item.icon icon='remove' action=(action "deletePageAction" index)}}
                    {{/title-item.subtree.item}}
                {{/each}}
            {{/if}}
        {{/list.item}}
    {{/tree-list}}
{{/if}}
